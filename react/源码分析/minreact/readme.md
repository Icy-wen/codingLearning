1. jsx的html 被 createElement 转换成虚拟dom对象
2. 在虚拟dom中，父子节点的关系是通过 children 数组来表示的，
为了让父子结点关联更密切，查找更高效，react将vdom处理成fiber（链表），
于是在结点处理时可以高并发
3. 18 版本之前是基于React Element递归渲染，18版本之后基于fiber链表的迭代渲染，计算量减少，渲染效率提高。
主要是因为链表循环时可以打断的，处理到某个结点可以停下来渲染其它结点。

# fiber
处理某一个结点时，如果发现一段时间后这个结点还没处理完，就会暂停处理，渲染其它结点，
等下一次浏览器空闲时再继续处理。--- 时间分片机制

- 通过记录parent，child，sibling 信息，让树变成链表，于是就可以被打断。
每次处理一个fiber结点前判断是否带来固定的时间间隔，
通过这种时间分片的手段将处理fiber的过程放在多个任务中执行，
解决了因页面内容过多造成卡顿的问题

# diff
react中的diff算法是用来比较fiber结点的差异的，
从而确定哪些结点需要更新，哪些结点不需要更新，从而减少更新的次数，提高渲染的效率

# 总结
1. render阶段：把jsx转换成vdom，然后把vdom转换成fiber链表
2. commit阶段：把fiber链表中的结点渲染到页面上

# MiniReact
1. 借助tsc编译jsx
2. 配置tsconfig.json设置在编译时启用MiniReact
3. 得到了vdom树，将vdom树转换为fiber链表
4. 递归遍历fiber链表，比较新老结点的差异，根据结点的特性来生成对应的dom

# diff

- diff 是react中一个用来比较fiber结点的差异的算法，只会比较同层的结点

1. 判断新老结点类型是否相同，如果类型相同，复用老结点的dom 结合新节点的props属性
2. 如果类型不同，且存在新节点，用新的结点直接替换
3. 如果类型不同，且不存在新节点，删除老结点
4. 否则，直接启用老结点

