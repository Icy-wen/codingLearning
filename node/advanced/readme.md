# node.js 基本架构

# node.js是什么

# 文章生成工具

- 输入标题
- 读取语料库
- 判断字数达标
- 是 -- 生成文章
- 否 -- 继续在语料库中查找

# http
1. 物理层
2. 数据链路层
3. 网络层
4. 传输层 tcp
5. 会话层
6. 表示层
7. 应用层 http

- 使用net模块创建TCP服务，用TCP服务来处理客户端的HTTP请求，需要使用字符串模板来组织http请求和响应报文，很麻烦

- 使用http模块创建HTTP服务，用HTTP服务来处理客户端的HTTP请求，不需要使用字符串模板来组织http请求和响应报文，很方便

- 为什么http 协议要分请求头和请求体
- 为了内容协商，根据不同的请求题返回不同的内容

# 静态文件服务

# http缓存

- 强缓存
 在响应头添加‘Cache-Control: max-age=3600’，表示缓存1小时
1. 浏览器会缓存文件，在缓存事件内，再次请求该文件，浏览器会直接从缓存中读取文件，不会向服务器发送请求
2. 缓存事件结束后，再次请求该文件，浏览器会向服务器发送请求，服务器会返回新的文件，浏览器会缓存新的文件

- 协商缓存

服务端返回一个资源并设置 'last-modified': stat.mtimeMs， 那么浏览器下一次请求该资源时，会自动在请求头中添加 'if-modified-since': 'last-modified' 的值，服务端会根据这个值来判断是否返回资源。

让浏览器 url 地址栏请求的资源也可以走缓存
'last-modified': stat.mtimeMs 存在一个缺陷，就是如果资源改变又撤销改变，浏览器就因为资源最后一次修改时间对不上而重新获取资源

'etag': "文件指纹"： 每次资源改变，文件指纹就会改变，浏览器会根据文件指纹来判断是否返回资源。


